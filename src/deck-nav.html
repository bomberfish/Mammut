<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#ffffff" />
    <meta
      name="theme-color"
      media="(prefers-color-scheme: dark)"
      content="#121212"
    />
    <meta name="darkreader-lock" />
    <title>Mammut - Deck</title>
    <link rel="stylesheet" href="/styles/base.css" />
    <link rel="stylesheet" href="/styles/default.css" />
    <script src="/util.js"></script>
    <script src="/auth.js"></script>
    <style>
      a {
        display: block;
        white-space: nowrap;
      }
      #searchForm,
      #searchForm * {
          width: 98%;
          margin-top: 0.3em;
          margin-bottom: 0.3em;
      }
    </style>
  </head>

  <body>
    <form id="searchForm">
        <input type="text" id="searchInput" name="q" placeholder="Search..." />
    </form>
    <a href="/timelines/following.html" target="content">Home</a>
    <a href="/timelines/local.html" target="content">Local</a>
    <a href="/timelines/federated.html" target="content">Federated</a>
    <br />
    <div id="sacrifice"></div>
    <a href="/conversations.html" target="content">Direct Messages</a>
    <a href="/bookmarks.html" target="content">Bookmarks</a>
    <a
      href="#"
      onclick="if(confirm('Are you sure you want to log out?')){logOut()}"
      >Log out</a
    >
  </body>
  <script>
    var myProfileLink = document.createElement("a");
    myId = localStorage.getItem("myId");
    myProfileLink.href = "/user.html?id=" + myId;
    myProfileLink.target = "content";
    myProfileLink.textContent = "My Profile";
    document.getElementById("sacrifice").outerHTML = myProfileLink.outerHTML;

    var searchForm = document.getElementById("searchForm");
    searchForm.onsubmit = handleSearch;

    function handleSearch(e) {
      if (!e) e = window.event;
      if (e.preventDefault) e.preventDefault();
      else e.returnValue = false;

      var query = document.getElementById("searchInput").value;
      window.open("/search.html?q=" + encodeURIComponent(query), "content");
    }
  </script>
</html>
